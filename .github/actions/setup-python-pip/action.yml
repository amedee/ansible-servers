---
name: Setup Python and Install Dependencies
description: Setup Python, cache pip packages, and install dependencies from a requirements file

inputs:
  python-version:
    description: "Python version to use"
    default: "3.x"
  requirements-file:
    description: "Path to the requirements file"
    default: "requirements.txt"

runs:
  using: "composite"
  steps:
    - name: ğŸ› ï¸ Set up Python
      uses: actions/setup-python@a309ff8b426b58ec0e2a45f0f869d46889d02405 # v6
      with:
        python-version: ${{ inputs.python-version }}

    - name: ğŸ’¾ Cache pip dependencies
      uses: actions/cache@cdf6c1fa76f9f475f3d7449005a359c84ca0f306 # v5
      with:
        path: ~/.cache/pip
        key: pip-cache-${{ hashFiles(inputs.requirements-file) }}
        restore-keys: |
          pip-cache-

    - name: ğŸ“¦ Install dependencies from requirements file
      run: pip install -r ${INPUTS_REQUIREMENTS_FILE}
      shell: bash

      env:
        INPUTS_REQUIREMENTS_FILE: ${{ inputs.requirements-file }}
